---
layout: base
---

{% include header.html type="page" %}

<div class="layout-wrapper">
  <!-- Menu (Left Column) -->
  <nav class="table-of-contents">
    <ul></ul> <!-- Dynamically populated by JavaScript -->
  </nav>

  <!-- Main Content (Right Column) -->
  <main class="{% if page.full-width %} container-fluid {% else %} container-md {% endif %}">
    <div class="row">
      <div class="{% if page.full-width %} col {% else %} col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 {% endif %}">
        {% if page.before-content %}
          <div class="before-content">
            {% for file in page.before-content %}
              {% include {{ file }} %}
            {% endfor %}
          </div>
        {% endif %}

        {{ content }}

        {% if page.after-content %}
          <div class="after-content">
            {% for file in page.after-content %}
              {% include {{ file }} %}
            {% endfor %}
          </div>
        {% endif %}

        {% include comments.html %}
      </div>
    </div>
  </main>
</div>

<style>
  /* Wrapper for the menu and main content */
  .layout-wrapper {
    display: flex; /* Side-by-side layout */
    flex-direction: row;
    height: 100vh; /* Full height of the viewport */
    overflow: visible; /* Prevent overflow issues */
  }

  /* Left column for the menu */
  .table-of-contents {
    width: 250px; /* Fixed width for the menu */
    position: sticky; /* Sticks to the viewport while scrolling */
    top: 0; /* Sticks the menu to the top */
    height: 100vh; /* Full height of the viewport */
    z-index: 1000; /* Ensures it stays above other elements */
    background-color: #1D1F21; /* Dark gray background */
    color: #E0E0E0; /* Light gray text color */
    padding: 20px; /* Adds padding inside the menu */
    box-sizing: border-box; /* Includes padding in width calculation */
    overflow-y: auto; /* Allows scrolling if the menu overflows */
    border-right: none; /* Removes any blue bar */
  }

  /* Menu links */
  .table-of-contents ul {
    list-style-type: none; /* Remove bullet points */
    padding: 0;
    margin: 0;
  }

  .table-of-contents li {
    margin: 10px 0; /* Adds spacing between links */
  }

  .table-of-contents a {
    text-decoration: none; /* Remove underline */
    font-weight: bold;
    color: #E0E0E0; /* Matches light gray text */
    transition: color 0.3s; /* Smooth transition for hover and active states */
  }

  .table-of-contents a:hover {
    text-decoration: underline;
    color: #0073b1; /* Highlight with blue on hover */
  }

  .table-of-contents a.active {
    color: #0073b1; /* Active link color */
    font-weight: bold;
    text-decoration: underline;
  }

  /* Main content area */
  main {
    flex: 1; /* Take up remaining space */
    padding: 20px; /* Adds padding around the content */
    padding-top: 80px; /* Pushes the text below the sticky menu */
    box-sizing: border-box; /* Includes padding in width calculation */
    overflow: visible; /* Prevent conflicts with sticky elements */
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const tableOfContents = document.querySelector(".table-of-contents ul");
    const sections = document.querySelectorAll("section[id]");

    // Clear existing menu items
    tableOfContents.innerHTML = "";

    // Generate menu items dynamically
    sections.forEach((section) => {
      const sectionId = section.getAttribute("id");
      const sectionTitle = section.querySelector("h2")?.innerText || sectionId;

      const listItem = document.createElement("li");
      const link = document.createElement("a");
      link.href = `#${sectionId}`;
      link.textContent = sectionTitle;

      listItem.appendChild(link);
      tableOfContents.appendChild(listItem);
    });

    // Highlight the current section as the user scrolls
    const navLinks = document.querySelectorAll(".table-of-contents a");

    window.addEventListener("scroll", () => {
      let currentSection = "";

      sections.forEach((section) => {
        const sectionTop = section.offsetTop - 100; // Adjust based on sticky menu height
        const sectionHeight = section.offsetHeight;
        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          currentSection = section.getAttribute("id");
        }
      });

      navLinks.forEach((link) => {
        link.classList.remove("active");
        if (link.getAttribute("href").includes(currentSection)) {
          link.classList.add("active");
        }
      });
    });

    // Smooth scrolling on menu clicks
    document.querySelectorAll('.table-of-contents a').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();

        const targetId = this.getAttribute('href').slice(1);
        const targetSection = document.getElementById(targetId);

        targetSection.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
    });
  });
</script>
